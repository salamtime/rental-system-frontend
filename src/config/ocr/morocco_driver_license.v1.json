{
  "version": "1.0",
  "country": "Morocco",
  "document_type": "driver_license",
  "description": "Morocco Driver License OCR Template v1",
  "anchors": {
    "prenom": {
      "keywords": ["Prénom", "PRENOM"],
      "type": "label",
      "script": "latin"
    },
    "nom": {
      "keywords": ["Nom", "NOM"],
      "type": "label",
      "script": "latin"
    },
    "permis_number": {
      "keywords": ["Permis N°", "PERMIS N°", "Permis No"],
      "type": "label",
      "script": "latin"
    },
    "cnie": {
      "keywords": ["N° C.N.I.E.", "N°C.N.I.E.", "CNIE"],
      "type": "label",
      "script": "latin"
    },
    "birth_info": {
      "keywords": ["Date et Lieu de naissance", "Date et lieu de naissance"],
      "type": "label",
      "script": "latin"
    },
    "issued_at": {
      "keywords": ["délivré à", "délivré", "Le"],
      "type": "label",
      "script": "latin"
    },
    "document_header": {
      "keywords": ["ROYAUME DU MAROC", "ROYAUME"],
      "type": "orientation",
      "script": "latin"
    }
  },
  "fields": {
    "full_name": {
      "anchor_refs": ["prenom", "nom"],
      "roi_offset": {
        "x": 0,
        "y": 20,
        "width": 300,
        "height": 40
      },
      "extraction_method": "latin_line_below_anchor",
      "regex": "^[A-Z\\s]{2,50}$",
      "min_confidence": 0.85,
      "required": true,
      "db_field": "customer_full_name"
    },
    "license_number": {
      "anchor_refs": ["permis_number"],
      "roi_offset": {
        "x": 80,
        "y": -5,
        "width": 120,
        "height": 25
      },
      "extraction_method": "token_right_of_anchor",
      "regex": "\\d{2}\\/\\d{6}|\\d{8}",
      "min_confidence": 0.90,
      "required": true,
      "db_field": "customer_licence_number"
    },
    "id_number": {
      "anchor_refs": ["cnie"],
      "roi_offset": {
        "x": 100,
        "y": -5,
        "width": 100,
        "height": 25
      },
      "extraction_method": "token_right_of_anchor",
      "regex": "\\bCT\\d{6,8}\\b",
      "min_confidence": 0.92,
      "required": true,
      "db_field": "customer_id_number"
    },
    "date_of_birth": {
      "anchor_refs": ["birth_info"],
      "roi_offset": {
        "x": 0,
        "y": 20,
        "width": 200,
        "height": 30
      },
      "extraction_method": "date_from_birth_line",
      "regex": "\\b\\d{2}[\\/\\-\\.]\\d{2}[\\/\\-\\.]\\d{4}\\b",
      "min_confidence": 0.88,
      "required": true,
      "db_field": "customer_dob"
    },
    "place_of_birth": {
      "anchor_refs": ["birth_info"],
      "roi_offset": {
        "x": 100,
        "y": 20,
        "width": 250,
        "height": 30
      },
      "extraction_method": "place_from_birth_line",
      "regex": "^[A-Z\\s]{2,50}$",
      "min_confidence": 0.80,
      "required": false,
      "db_field": "customer_address",
      "format": "Place of birth: {value}"
    },
    "issue_date": {
      "anchor_refs": ["issued_at"],
      "roi_offset": {
        "x": 50,
        "y": -5,
        "width": 100,
        "height": 25
      },
      "extraction_method": "date_after_anchor",
      "regex": "\\b\\d{2}[\\/\\-\\.]\\d{2}[\\/\\-\\.]\\d{4}\\b",
      "min_confidence": 0.85,
      "required": false,
      "db_field": "customer_issue_date"
    },
    "nationality": {
      "default_value": "MOROCCAN",
      "required": false,
      "db_field": "customer_nationality"
    },
    "gender": {
      "required": false,
      "note": "Not reliably printed on front of Morocco licenses"
    },
    "expiry_date": {
      "required": false,
      "warn_if_missing": true,
      "db_field": "customer_licence_expiry",
      "note": "May not be visible on front side"
    }
  },
  "preprocessing": {
    "auto_deskew": true,
    "clahe_contrast": {
      "clip_limit": 2.0,
      "tile_grid_size": [8, 8]
    },
    "bilateral_filter": {
      "d": 9,
      "sigma_color": 75,
      "sigma_space": 75
    },
    "adaptive_threshold": {
      "max_value": 255,
      "adaptive_method": "ADAPTIVE_THRESH_GAUSSIAN_C",
      "threshold_type": "THRESH_BINARY",
      "block_size": 11,
      "c": 2
    },
    "median_blur_hologram": {
      "kernel_size": 3,
      "apply_to_regions": ["top_right", "bottom_left"]
    },
    "orientation_check": {
      "reference_text": "ROYAUME DU MAROC",
      "expected_angle": 0
    }
  },
  "ocr_settings": {
    "languages": ["ara", "fra", "eng"],
    "fallback_languages": [["fra", "eng"], ["eng"]],
    "psm": 6,
    "oem": 1,
    "parameters": {
      "preserve_interword_spaces": "1",
      "textord_heavy_nr": "1",
      "load_system_dawg": "1",
      "load_freq_dawg": "1",
      "load_punc_dawg": "1",
      "load_number_dawg": "1"
    }
  }
}